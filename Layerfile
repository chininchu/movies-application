FROM vm/ubuntu:18.04

RUN curl -sL https://deb.nodesource.com/setup_16.x | bash
RUN apt-get install -y nodejs

COPY . .

RUN npm install

RUN npm run build

# Set the OMDB API key as an environment variable
ENV OMDB_API_KEY=$OMDB_API_KEY
ENV NODE_ENV=production

# Check if the API key is set
RUN echo "OMDB API Key: $OMDB_API_KEY"

RUN BACKGROUND npm start

EXPOSE WEBSITE http://localhost:3000